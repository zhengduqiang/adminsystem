<html class="no-js" xmlns:fm="http://www.w3.org/1999/html">
<html xmlns="http://www.w3.org/1999/xhtml">
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=emulateIE7"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="common/css/sapar.css"/>
    <link rel="stylesheet" href="common/css2/index.css"/>
    <link rel="icon" href="common/images2/logo.jpg" type="image/x-icon"/>
    <link rel="stylesheet" href="common/css2/index_inner.css"/>
    <link rel="stylesheet" type="text/css" href="common/css/common.css"/>
    <script type="text/javascript" src="common/js/WdatePicker.js"></script>

    <title>新澳森校油泵管理系统</title>
</head>
<body>
<div id="container">
    <div id="hd">
        <div class="hd-wrap clearfix">
            <div class="top-light"></div>
            <ul class="main-nav clearfix" style="height: 0px;margin-left: 5px;">
                <li data-src="static/ticket/index.html"><a th:href="@{/findFinancingAll}">账本</a></li>
                <li data-src="static/caiwu/index.html"><a th:href="@{/findInventoryAll}">库存</a></li>
                <li class="current" data-src="static/msg/index.html"><a th:href="@{/findSupplierAll}">供应商</a></li>
                <li data-src="static/insurance/index.html"><a th:href="@{/findSalaryAll}">工资</a></li>
            </ul>
            <div style="float:left">
                <img src="common/images/logo1.png" height="100" width="300" style="margin-left: 80px;"/>
            </div>
            <div class="toolbar">
                <div class="login-info clearfix">
                    <div class="welcome clearfix"><span>欢迎您,</span><a href="javascript:;" class="user-name">管理员</a>
                    </div>
                </div>
                <div class="tool clearfix" style="margin-left: 95px;">
                    <a href="javascript:;" class="quit-btn exit">退出</a>
                </div>
            </div>
        </div>
    </div>
    <div id="bd">
        <div class="wrap clearfix">
            <div class="sidebar" style="background-color: #f1f8fc">
                <h2 class="sidebar-header"><p>功能导航</p></h2>
                <ul class="nav">
                    <li class="office current">
                        <div class="nav-header"><a th:href="@{/findSupplierAll}" data-src="buy_msg.html"
                                                   class="clearfix"><span>供应商管理</span><i
                                class="icon"></i></a></div>
                    </li>
                    <li class="gongwen">
                        <div class="nav-header"><a th:href="@{/send_msg}" data-src="send_msg.html"
                                                   class="clearfix"><span>增加供应商</span><i class="icon"></i></a></div>
                    </li>
                </ul>
            </div>
            <div class="content">
                <div class="topbar clearfix">
                    <div id="saper-container">
                        <div id="saper-hd"></div>
                        <div id="saper-bd">
                            <div class="subfiled clearfix">
                                <h2>供应商管理</h2>
                            </div>
                            <div class="subfiled-content" style="margin-left:300px;">
                                <form class="saper-form" th:action="findSupplierAll" method="post">
                                    <div class="kv-item clearfix">
                                        <label>供应商名称：</label>
                                        <div class="kv-item-content">
                                            <input type="text" placeholder="供应商名称" name="supplierName"
                                                   th:value="${supplierName}" style="width: 150px;"/>
                                        </div>
                                        <div class="kv-item clearfix">
                                            <label>日期：</label>
                                            <div class="kv-item-content time-select-wrap">
                                                <div class="time-select">
                                                    <input type="text" onfocus="WdatePicker({dateFmt:'yyyy-MM'})"
                                                           placeholder="日期" name="supplierDate"
                                                           th:value="${supplierDate}" style="width: 130px;"/>
                                                    <i class="date-icon"></i>
                                                </div>
                                            </div>
                                            <input type="submit" value="搜索" style="margin-left:20px;"
                                                   class="sapar-btn sapar-btn-recom query-btn"/>
                                        </div>

                                    </div>

                                </form>
                            </div>
                            <!--表格开始-->
                            <div class="table">
                                <!--表格操作-->
                                <div class="table-operate ue-clear">
                                    <a href="javascript:;" class="check">供应商信息</a>
                                </div>
                                <!--表格具体内容-->
                                <div class="table-box">
                                    <table>
                                        <thead>
                                        <tr>
                                            <th>供应商名称</th>
                                            <th>添加日期</th>
                                            <th>货款金额</th>
                                            <th>结算金额</th>
                                            <th>欠款金额</th>
                                            <th>操作</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr th:each="supplierAll:${supplierAlls}">
                                            <td th:text="${supplierAll.supplierName}">22222222222</td>
                                            <td th:text="${supplierAll.supplierDate}">2012-02-02 16:25</td>
                                            <td th:text="${'￥'+supplierAll.loanAmount}"
                                                style="color:#ff4e00;font-weight: bold;">100.00
                                            </td>
                                            <td th:text="${'￥'+supplierAll.settlementAmout}"
                                                style="color:green;font-weight: bold;">100.00
                                            </td>
                                            <td th:text="${'￥'+supplierAll.amountInArear}"
                                                style="color:red;font-weight: bold;">100.00
                                            </td>
                                            <td><a href="#" class="xg" th:item-id2="${supplierAll.nId}">[修改]</a><a
                                                    href="javascript:;"
                                                    th:item-id="${supplierAll.nId}"
                                                    style=" margin-left:20px;"
                                                    class="exit4 sc">[删除]</a></td>
                                        </tr>
                                        <tr class="no-data" th:if="${pageInfo.total==0}">
                                            <td colspan="10">没有查询到任何数据</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                    <div class="container large" th:if="${pageInfo.total>12}"
                                         style="position:absolute;left:680px;top:580px;height: 10px;">
                                        <p style="color: #7d7d7d;text-transform: uppercase;font-size:14px;position:relative;left:-220px;">
                                            共<span th:text="${pageInfo.total}"></span>条记录 每页<span
                                                th:text="${pageInfo.pageSize}"></span>条 现在<span
                                                th:text="${pageInfo.pageNum}"></span>/<span
                                                th:text="${pageInfo.pages}"></span>页</p>
                                        <div class="pagination">
                                            <ul>
                                                <li>
                                                    <a th:href="@{/findSupplierAll(pageNum=1,supplierName=${supplierName})}">首页</a>
                                                </li>
                                                <li th:if="${pageInfo.pageNum!=1}">
                                                    <a th:href="@{/findSupplierAll(pageNum=${pageInfo.pageNum-1},supplierName=${supplierName})}">上一页</a>
                                                </li>
                                                <li th:if="${pageInfo.pageNum==1}">
                                                    <a th:href="@{/findSupplierAll(pageNum=${pageInfo.pageNum},supplierName=${supplierName})}">上一页</a>
                                                </li>
                                                <li th:if="${pageInfo.pageNum<pageInfo.pages}">
                                                    <a th:href="@{/findSupplierAll(pageNum=${pageInfo.pageNum+1},supplierName=${supplierName})}">下一页</a>
                                                </li>
                                                <li th:if="${pageInfo.pageNum==pageInfo.pages}">
                                                    <a th:href="@{/findSupplierAll(pageNum=${pageInfo.pageNum},supplierName=${supplierName})}">下一页</a>
                                                </li>
                                                <li>
                                                    <a th:href="@{/findSupplierAll(pageNum=${pageInfo.pages},supplierName=${supplierName})}">尾页</a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div><!--表格结束-->
                            <!--分页开始-->
                            <div id="pagin" class="pagination"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="ft" class="clearfix">
        <div class="ft-left">
            <span>新澳森校油泵管理系统</span>
            <em>Office&nbsp;System</em>
        </div>
        <div class="ft-right">
            <span>Automation</span>
            <em>V2.0&nbsp;2014</em>
        </div>
    </div>
</div>
<div id="xg"
     style="background-color: rgba(0,0,0,0.8);width:100%;height:100%;position:absolute;top:-0px;z-index:999;display:none; ">
    <div id="saper-container"
         style="background-color:white;width:500px; height: 450px; margin-left:550px;margin-top:100px; border-radius: 5%;">
        <div id="saper-hd"></div>
        <div class="subfiled clearfix" style="border-radius: 5%;">
            <h2 style="margin-left: 140px;font-size:19px;">修改供应商信息</h2>
        </div>
        <div id="saper-bd" style="margin-left: 80px;">
            <br/>
            <br/>
            <br/>
            <form class="passenger-info">
                <input type="hidden" class="nId"/>
                <div class="kv-item clearfix">
                    <label style="font-size: 13px;">供应商名称：</label>
                    <div class="kv-item-content">
                        <input type="text" placeholder="供应商名称" class="supplierName" style="width: 160px;"/>
                    </div>
                    <div class="kv-item-tip"></div>
                </div>
                <div class="kv-item clearfix">
                    <label style="font-size: 13px;">货款金额：</label>
                    <div class="kv-item-content">
                        <input type="text" placeholder="货款金额" class="loanAmount" style="width: 160px;"/>
                    </div>
                </div>
                <div class="kv-item clearfix">
                    <label style="font-size: 13px;">结算金额：</label>
                    <div class="kv-item-content">
                        <input type="text" placeholder="结算金额" class="settlementAmout" style="width: 160px;"/>
                    </div>
                    <div class="kv-item-tip"></div>
                </div>
                <div class="kv-item clearfix">
                    <label style="font-size: 13px;">欠款金额：</label>
                    <div class="kv-item-content">
                        <input type="text" placeholder="欠款金额" class="amountInArear" style="width: 160px;"/>
                    </div>
                    <div class="kv-item-tip"></div>
                </div>
                <div class="kv-item clearfix" style="margin-left: 5px;">
                    <label> 日期：</label>
                    <div class="kv-item-content time-select-wrap">
                        <div class="time-select">
                            <input type="text" class="supplierDate" onfocus="WdatePicker({dateFmt:'yyyy-MM-dd'})"
                                   placeholder="日期" style="width: 160px;"/>
                            <i class="date-icon"></i>
                        </div>
                    </div>
                </div>

                <div class="kv-item clearfix" style="margin-left: 5px;">
                    <br/>
                    <div class="buttons clearfix" style="margin-left: 81px;">
                        <a href="javascript:;" class="sapar-btn sapar-btn-recom exit5">修改</a>
                        <a href="javascript:;" id="qx" class="sapar-btn sapar-btn-recom"
                           style="margin-left: 20px;">取消</a>
                    </div>
                </div>
            </form>
        </div>
        </form>
    </div>
</div>
<!-- 温馨提示 -->
<div class="exitDialog2">
    <div class="dialog-content">
        <div class="ui-dialog-text" style="background-color:ActiveBorder;width: 200px;">
            <p class="dialog-content">我的温馨提示</p>
        </div>
    </div>
</div>

<!-- 对话框 -->
<div class="exitDialog">
    <div class="dialog-content">
        <div class="ui-dialog-icon">
        </div>
        <div class="ui-dialog-text">
            <p class="dialog-content">你确定要退出系统？</p>
            <p class="tips">如果是请点击“确定”，否则点“取消”</p>
            <div class="buttons">
                <button type="button" class="layui-btn layui-btn-normal qdtcxt" style="background-color: #1E9FFF;
                    padding: 7px 18px 7px 18px;border: 0px;font-size:14px;color:white;border-radius:5%;">
                    确定
                </button>
                <button type="button" class="xtqx" style="background-color: #FF5722;
                    padding: 7px 18px 7px 18px;border: 0px;font-size:14px;color:white;border-radius:5%;margin-left: 10px;">
                    取消
                </button>
            </div>
        </div>
    </div>
</div>
<div class="exitDialog4">
    <div class="dialog-content">
        <div class="ui-dialog-icon">
            <img src="../../common/images/sc.jpg" height="78" width="78"/>
        </div>
        <div class="ui-dialog-text">
            <p class="dialog-content">是否删除供应商信息？</p>
            <p class="tips">如果是请点击“确定”，否则点“取消”</p>
            <div class="buttons">
                <button type="button" class="layui-btn layui-btn-normal qdsc" style="background-color: #1E9FFF;
                    padding: 7px 18px 7px 18px;border: 0px;font-size:14px;color:white;border-radius:5%;">
                    确定
                </button>
                <button type="button" class="xtqx" style="background-color: #FF5722;
                    padding: 7px 18px 7px 18px;border: 0px;font-size:14px;color:white;border-radius:5%;margin-left: 10px;">
                    取消
                </button>
            </div>
        </div>
    </div>
</div>

<div class="exitDialog5">
    <div class="dialog-content">
        <div class="ui-dialog-icon">
        </div>
        <div class="ui-dialog-text">
            <p class="dialog-content">是否修改供应商信息？</p>
            <p class="tips">如果是请点击“确定”，否则点“取消”</p>
            <div class="buttons">
                <button type="button" class="layui-btn layui-btn-normal qdxg" style="background-color: #1E9FFF;
                    padding: 7px 18px 7px 18px;border: 0px;font-size:14px;color:white;border-radius:5%;">
                    确定
                </button>
                <button type="button" class="xtqx" style="background-color: #FF5722;
                    padding: 7px 18px 7px 18px;border: 0px;font-size:14px;color:white;border-radius:5%;margin-left: 10px;">
                    取消
                </button>
            </div>
        </div>
    </div>
</div>
</body>
<script type="text/javascript" src="common/js/jquery.js"></script>
<script type="text/javascript" src="common/js/sapar.js"></script>
<script type="text/javascript" src="common/js2/index.js"></script>
<!--<script src="common/layui/layui.js"></script>-->
<script>
    $(".xg").click(function () {
        $("#xg").css("display", "block");
    });
    $("#qx").click(function () {
        $("#xg").css("display", "none");
    });
    $('.exitDialog4').Dialog({
        title: '温馨提示',
        autoOpen: false,
        width: 400,
        height: 200
    });
    $('.exit4').click(function () {
        $('.exitDialog4').Dialog('open');
    });
    $("#xt").click(function () {
        $('.exitDialog4').Dialog('close');
    });
    $(".xtqx").click(function () {
        $('.exitDialog4').Dialog('close');
        $('.exitDialog').Dialog('close');
        $('.exitDialog5').Dialog('close');

    })
    $('.exit5').click(function () {
        $('.exitDialog5').Dialog('open');
    });
    $('.exitDialog5').Dialog({
        title: '温馨提示',
        autoOpen: false,
        width: 400,
        height: 200
    });

    var id2;
    $(".sc").click(function () {
        id2 = $(this).attr("item-id");
    });

    //删除库存信息
    $(".qdsc").click(function () {
        $.ajax({
            url: "/deleteSuppliernId",
            type: "post",
            data: {nId: id2},
            dataType: "json",
            success: function (result) {
                if (result == 1) {
                    alert("删除供应商信息成功");
                    window.location.reload();
                }
            },
            error: function () {
                alert("出现异常，刷新页面或者联系管理员");
            }
        });
    });

    //根据ID查询对应的供应商信息
    $(".xg").click(function () {
        var nId2 = $(this).attr("item-id2");
        $.ajax({
            url: "/findSuppliernId",
            type: "post",
            data: {nId: nId2},
            dataType: "json",
            success: function (result) {
                $(".supplierName").val(result.supplierName);
                $(".loanAmount").val(result.loanAmount);
                $(".amountInArear").val(result.amountInArear);
                $(".settlementAmout").val(result.settlementAmout);
                $(".nId").val(result.nId);
                $(".supplierDate").val(result.supplierDate);
            },
            error: function () {
                alert("出现异常，刷新页面或者联系管理员");
            }
        });
    });
    //根据ID修改对应的供应商信息
    $(".qdxg").click(function () {
        var nId2 = $(".nId").val();
        var supplierName2 = $(".supplierName").val();
        var loanAmount2 = $(".loanAmount").val();
        let amountInArear2 = $(".amountInArear").val();
        let settlementAmout2 = $(".settlementAmout").val();
        var supplierDate2 = $(".supplierDate").val();
        $.ajax({
            url: "/updateSuppliernId",
            type: "post",
            data: {
                nId: nId2,
                supplierName: supplierName2,
                loanAmount: loanAmount2,
                amountInArear: amountInArear2,
                settlementAmout: settlementAmout2,
                supplierDate: supplierDate2
            },
            dataType: "json",
            success: function (result) {
                if (result == 1) {
                    alert("修改供应商信息成功");
                    window.location.reload();
                }
            },
            error: function () {
                alert("出现异常，请确定文本框内容输入正确或刷新当前页面");
            }
        });
    });

    $(".qdtcxt").click(function () {
        window.location.href = "/exitLogin";
    });

</script>
</html>
